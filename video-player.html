<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视频播放 - 武学堂</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script src="https://vjs.zencdn.net/8.3.0/video.min.js"></script>
    <link href="https://vjs.zencdn.net/8.3.0/video-js.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;500;700&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">
    <style>
        :root {
            --ink-black: #2C2C2C;
            --vermillion: #D32F2F;
            --forest-green: #2E7D32;
            --gold: #FFA000;
            --ink-gray: #757575;
            --paper-white: #FEFEFE;
            --light-ink: #BDBDBD;
            --deep-teal: #00695C;
        }
        
        body {
            font-family: 'Noto Serif SC', serif;
            background: linear-gradient(135deg, #FEFEFE 0%, #F5F5F5 100%);
            color: var(--ink-black);
        }
        
        .hero-title {
            font-family: 'Ma Shan Zheng', cursive;
            background: linear-gradient(45deg, var(--vermillion), var(--gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .decorative-title {
            font-family: 'ZCOOL XiaoWei', serif;
            color: var(--deep-teal);
        }
        
        .navigation {
            background: rgba(254, 254, 254, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--light-ink);
        }
        
        .video-container {
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            aspect-ratio: 16/9;
        }
        
        .video-js {
            width: 100%;
            height: 100%;
        }
        
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        .video-info-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .comment-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            border: 1px solid var(--light-ink);
            transition: all 0.3s ease;
        }
        
        .comment-card:hover {
            border-color: var(--vermillion);
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--vermillion), #E53935);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(211,47,47,0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--deep-teal);
            border: 2px solid var(--deep-teal);
            padding: 6px 14px;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: var(--deep-teal);
            color: white;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            stroke-dasharray: 251.2;
            stroke-dashoffset: 251.2;
            transition: stroke-dashoffset 0.6s ease;
        }
        
        .rating-stars {
            display: flex;
            gap: 2px;
        }
        
        .star {
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .star.active {
            color: #ffa500;
        }
        
        .star:hover {
            color: #ffa500;
        }
        
        .related-video {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .related-video:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }
        
        .footer {
            background: var(--ink-black);
            color: var(--paper-white);
            border-top: 3px solid var(--vermillion);
        }
        
        .modal {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .note-card {
            background: #f8f9fa;
            border-left: 4px solid var(--gold);
            padding: 16px;
            border-radius: 8px;
            margin: 8px 0;
        }
        
        .learning-path {
            background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
            border: 1px solid var(--forest-green);
            border-radius: 12px;
            padding: 20px;
        }
        
        .path-step {
            display: flex;
            align-items: center;
            margin: 12px 0;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid var(--forest-green);
        }
        
        .path-step.completed {
            border-left-color: var(--gold);
            background: #fffbf0;
        }
        
        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }
        
        .scroll-reveal.revealed {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navigation fixed top-0 left-0 right-0 z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <img src="./resources/logo.png" alt="武学堂" class="w-10 h-10">
                <h1 class="text-2xl font-bold hero-title">武学堂</h1>
            </div>
            
            <div class="hidden md:flex items-center space-x-8">
                <a href="index.html" class="text-lg font-medium text-gray-800 hover:text-red-600 transition-colors">首页</a>
                <a href="videos.html" class="text-lg font-medium text-gray-800 hover:text-red-600 transition-colors">视频教程</a>
                <a href="membership.html" class="text-lg font-medium text-gray-800 hover:text-red-600 transition-colors">会员中心</a>
                <a href="profile.html" class="text-lg font-medium text-gray-800 hover:text-red-600 transition-colors">个人中心</a>
            </div>
            
            <div class="flex items-center space-x-4">
                <button id="loginBtn" class="btn-secondary">登录</button>
                <button id="registerBtn" class="btn-primary">注册</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <section class="pt-24 pb-20 px-6">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Video Player Section -->
                <div class="lg:col-span-2">
                    <!-- Video Player -->
                    <div class="video-container mb-6">
                        <video
                            id="videoPlayer"
                            class="video-js vjs-default-skin"
                            controls
                            preload="auto"
                            data-setup='{}'>
                            <source src="#" type="video/mp4">
                            <p class="vjs-no-js">
                                要观看此视频，请启用JavaScript，并考虑升级到支持HTML5视频的Web浏览器
                            </p>
                        </video>
                        
                        <!-- Video Overlay for Permission Check -->
                        <div id="videoOverlay" class="video-overlay hidden">
                            <div class="video-info-card text-center">
                                <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-xl font-bold mb-2">需要升级会员</h3>
                                <p class="text-gray-600 mb-4">您的当前会员等级无法观看此视频</p>
                                <div class="space-x-4">
                                    <button onclick="window.location.href='membership.html'" class="btn-primary">升级会员</button>
                                    <button onclick="closeVideoOverlay()" class="btn-secondary">返回</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Video Info -->
                    <div class="content-card p-6 mb-6">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex-1">
                                <h1 class="text-2xl font-bold mb-2" id="videoTitle">少林基本功 - 马步冲拳</h1>
                                <div class="flex items-center space-x-4 text-sm text-gray-600 mb-4">
                                    <span id="videoMaster">释永信大师</span>
                                    <span id="videoDuration">25:30</span>
                                    <span id="videoViews">12,500 次观看</span>
                                    <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs" id="videoDifficulty">初级</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button id="favoriteBtn" class="btn-secondary" onclick="toggleFavorite()">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                    </svg>
                                </button>
                                <button class="btn-secondary" onclick="shareVideo()">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <p class="text-gray-600 mb-6" id="videoDescription">
                            少林寺第34代传人亲自示范，从基础马步开始，掌握正宗少林功夫的基本要领。本课程详细讲解马步的标准姿势、呼吸方法和发力技巧，适合武术初学者入门学习。
                        </p>
                        
                        <!-- Rating Section -->
                        <div class="flex items-center justify-between border-t pt-4">
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-gray-600">评分:</span>
                                <div class="rating-stars" id="ratingStars">
                                    <span class="star active" data-rating="1">★</span>
                                    <span class="star active" data-rating="2">★</span>
                                    <span class="star active" data-rating="3">★</span>
                                    <span class="star active" data-rating="4">★</span>
                                    <span class="star" data-rating="5">★</span>
                                </div>
                                <span class="text-sm text-gray-600" id="ratingValue">4.2</span>
                            </div>
                            <button class="btn-primary" onclick="showRatingModal()">评价</button>
                        </div>
                    </div>
                    
                    <!-- Learning Progress -->
                    <div class="content-card p-6 mb-6">
                        <h3 class="text-xl font-bold mb-4">学习进度</h3>
                        <div class="flex items-center space-x-6">
                            <div class="relative w-20 h-20">
                                <svg class="progress-ring w-20 h-20">
                                    <circle class="progress-ring-circle" stroke="var(--forest-green)" stroke-width="4" fill="transparent" r="40" cx="40" cy="40" style="stroke-dashoffset: 125.6;"/>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-lg font-bold text-green-600" id="progressPercent">50%</span>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium">观看进度</span>
                                    <span class="text-sm text-gray-500" id="progressTime">12:45 / 25:30</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-600 h-2 rounded-full" style="width: 50%" id="progressBar"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Learning Path -->
                    <div class="learning-path mb-6">
                        <h3 class="text-xl font-bold mb-4 decorative-title">学习路径</h3>
                        <div class="space-y-3">
                            <div class="path-step completed">
                                <div class="w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mr-3">
                                    <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium">基础马步练习</h4>
                                    <p class="text-sm text-gray-600">掌握标准马步姿势</p>
                                </div>
                            </div>
                            <div class="path-step">
                                <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-xs text-gray-600">2</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium">马步冲拳练习</h4>
                                    <p class="text-sm text-gray-600">学习冲拳的发力技巧</p>
                                </div>
                            </div>
                            <div class="path-step">
                                <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center mr-3">
                                    <span class="text-xs text-gray-600">3</span>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium">组合动作练习</h4>
                                    <p class="text-sm text-gray-600">连贯动作练习</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Comments Section -->
                    <div class="content-card p-6">
                        <h3 class="text-xl font-bold mb-4">学员评论 (24)</h3>
                        
                        <!-- Add Comment -->
                        <div class="mb-6">
                            <textarea placeholder="分享您的学习心得..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500 resize-none" rows="3"></textarea>
                            <div class="flex justify-end mt-2">
                                <button class="btn-primary">发表评论</button>
                            </div>
                        </div>
                        
                        <!-- Comments List -->
                        <div class="space-y-4">
                            <div class="comment-card">
                                <div class="flex items-start space-x-3">
                                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                        <span class="text-blue-600 font-bold text-sm">李</span>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <h4 class="font-medium">李明</h4>
                                            <span class="text-xs text-gray-500">2天前</span>
                                        </div>
                                        <p class="text-gray-700 text-sm">老师讲解很详细，马步的姿势纠正了我之前的错误，受益匪浅！</p>
                                        <div class="flex items-center space-x-4 mt-2">
                                            <button class="text-xs text-gray-500 hover:text-red-600">点赞 (12)</button>
                                            <button class="text-xs text-gray-500 hover:text-red-600">回复</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="comment-card">
                                <div class="flex items-start space-x-3">
                                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                        <span class="text-green-600 font-bold text-sm">王</span>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <h4 class="font-medium">王小芳</h4>
                                            <span class="text-xs text-gray-500">1周前</span>
                                        </div>
                                        <p class="text-gray-700 text-sm">初学者很适合，动作分解得很清楚，跟着练习效果很好。</p>
                                        <div class="flex items-center space-x-4 mt-2">
                                            <button class="text-xs text-gray-500 hover:text-red-600">点赞 (8)</button>
                                            <button class="text-xs text-gray-500 hover:text-red-600">回复</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar -->
                <div class="lg:col-span-1">
                    <!-- Course Info -->
                    <div class="content-card p-6 mb-6">
                        <h3 class="text-lg font-bold mb-4">课程信息</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600">难度:</span>
                                <span class="text-green-600 font-medium">初级</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">时长:</span>
                                <span class="font-medium">25:30</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">观看:</span>
                                <span class="font-medium">12,500</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">评分:</span>
                                <span class="font-medium text-yellow-600">4.2</span>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <h4 class="font-medium mb-3">教练介绍</h4>
                            <div class="flex items-center space-x-3">
                                <img src="./resources/masters.jpg" alt="释永信大师" class="w-12 h-12 rounded-full object-cover">
                                <div>
                                    <h5 class="font-medium">释永信大师</h5>
                                    <p class="text-xs text-gray-500">少林寺第34代传人</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Learning Notes -->
                    <div class="content-card p-6 mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-bold">学习笔记</h3>
                            <button class="btn-primary text-sm" onclick="showNoteModal()">添加笔记</button>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="note-card">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">马步要点</span>
                                    <span class="text-xs text-gray-500">今天 14:30</span>
                                </div>
                                <p class="text-sm text-gray-700">膝盖不要超过脚尖，背部挺直，重心下沉</p>
                            </div>
                            
                            <div class="note-card">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium">呼吸方法</span>
                                    <span class="text-xs text-gray-500">今天 15:15</span>
                                </div>
                                <p class="text-sm text-gray-700">冲拳时呼气，收拳时吸气，保持节奏</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Related Videos -->
                    <div class="content-card p-6">
                        <h3 class="text-lg font-bold mb-4">相关视频</h3>
                        
                        <div class="space-y-4">
                            <div class="related-video" onclick="playRelatedVideo(2)">
                                <img src="./resources/taichi1.jpg" alt="太极拳" class="w-full h-32 object-cover">
                                <div class="p-3">
                                    <h4 class="font-medium text-sm mb-1">24式太极拳 - 起势到野马分鬃</h4>
                                    <p class="text-xs text-gray-500">陈小旺大师 • 18:45</p>
                                </div>
                            </div>
                            
                            <div class="related-video" onclick="playRelatedVideo(3)">
                                <img src="./resources/wingchun1.jpg" alt="咏春拳" class="w-full h-32 object-cover">
                                <div class="p-3">
                                    <h4 class="font-medium text-sm mb-1">咏春拳小念头 - 基础手法</h4>
                                    <p class="text-xs text-gray-500">叶问传人 • 32:15</p>
                                </div>
                            </div>
                            
                            <div class="related-video" onclick="playRelatedVideo(4)">
                                <img src="./resources/xingyi1.jpg" alt="形意拳" class="w-full h-32 object-cover">
                                <div class="p-3">
                                    <h4 class="font-medium text-sm mb-1">形意拳三体式 - 基础站桩</h4>
                                    <p class="text-xs text-gray-500">李仲轩传人 • 22:40</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Rating Modal -->
    <div id="ratingModal" class="modal fixed inset-0 z-50 hidden items-center justify-center">
        <div class="modal-content p-8">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold decorative-title">评价视频</h3>
                <button onclick="closeRatingModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="text-center mb-6">
                <h4 class="font-bold text-lg mb-2" id="modalVideoTitle">少林基本功 - 马步冲拳</h4>
                <div class="rating-stars justify-center mb-4" id="modalRatingStars">
                    <span class="star text-3xl" data-rating="1">★</span>
                    <span class="star text-3xl" data-rating="2">★</span>
                    <span class="star text-3xl" data-rating="3">★</span>
                    <span class="star text-3xl" data-rating="4">★</span>
                    <span class="star text-3xl" data-rating="5">★</span>
                </div>
                <p class="text-gray-600">请选择您的评分</p>
            </div>
            
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">评价内容</label>
                <textarea placeholder="分享您的学习心得..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500 resize-none" rows="4"></textarea>
            </div>
            
            <button class="btn-primary w-full" onclick="submitRating()">提交评价</button>
        </div>
    </div>

    <!-- Note Modal -->
    <div id="noteModal" class="modal fixed inset-0 z-50 hidden items-center justify-center">
        <div class="modal-content p-8">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold decorative-title">添加学习笔记</h3>
                <button onclick="closeNoteModal()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2">笔记标题</label>
                <input type="text" placeholder="输入笔记标题..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500 mb-4">
                
                <label class="block text-sm font-medium mb-2">笔记内容</label>
                <textarea placeholder="记录您的学习心得和要点..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500 resize-none" rows="6"></textarea>
            </div>
            
            <div class="flex space-x-4">
                <button class="btn-secondary flex-1" onclick="closeNoteModal()">取消</button>
                <button class="btn-primary flex-1" onclick="saveNote()">保存笔记</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer py-12 px-6">
        <div class="max-w-7xl mx-auto text-center">
            <div class="flex items-center justify-center space-x-3 mb-6">
                <img src="./resources/logo.png" alt="武学堂" class="w-8 h-8">
                <h3 class="text-2xl font-bold">武学堂</h3>
            </div>
            <p class="text-gray-400 mb-6 max-w-2xl mx-auto">
                传承千年武学精髓，弘扬中华武术文化。我们致力于通过现代化的教学方式，让更多人了解和学习正宗的中国武术。
            </p>
            <div class="border-t border-gray-700 pt-6">
                <p class="text-gray-500">
                    © 2024 武学堂. 保留所有权利. | 京ICP备12345678号 | 京公网安备11010802012345号
                </p>
            </div>
        </div>
    </footer>

    <script src="main.js"></script>
    <script>
        let currentVideoId = 1;
        let currentRating = 4;
        let isFavorited = false;
        let videoProgress = 50;
        
        // Video data
        const videoData = {
            1: {
                title: "少林基本功 - 马步冲拳",
                master: "释永信大师",
                duration: "25:30",
                views: "12,500",
                difficulty: "初级",
                description: "少林寺第34代传人亲自示范，从基础马步开始，掌握正宗少林功夫的基本要领。本课程详细讲解马步的标准姿势、呼吸方法和发力技巧，适合武术初学者入门学习。",
                rating: 4.2,
                thumbnail: "./resources/shaolin1.jpg"
            },
            2: {
                title: "24式太极拳 - 起势到野马分鬃",
                master: "陈小旺大师",
                duration: "18:45",
                views: "9,800",
                difficulty: "初级",
                description: "陈氏太极拳第12代传人详细讲解24式太极拳的前三个动作，适合初学者。",
                rating: 4.8,
                thumbnail: "./resources/taichi1.jpg"
            },
            3: {
                title: "咏春拳小念头 - 基础手法",
                master: "叶问传人",
                duration: "32:15",
                views: "15,600",
                difficulty: "中级",
                description: "咏春拳基础套路小念头的完整教学，包含手法、步法和呼吸要领。",
                rating: 4.9,
                thumbnail: "./resources/wingchun1.jpg"
            },
            4: {
                title: "形意拳三体式 - 基础站桩",
                master: "李仲轩传人",
                duration: "22:40",
                views: "7,800",
                difficulty: "初级",
                description: "形意拳基础功法三体式的详细讲解，掌握内外合一的精髓。",
                rating: 4.7,
                thumbnail: "./resources/xingyi1.jpg"
            }
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            initVideoPlayer();
            setupRatingSystem();
            setupScrollReveal();
        });
        
        function initVideoPlayer() {
            const videoPlayer = videojs('videoPlayer', {
                controls: true,
                autoplay: false,
                preload: 'auto',
                fluid: true,
                responsive: true
            });
            
            // Check user permission
            const user = JSON.parse(localStorage.getItem('currentUser') || '{}');
            if (!user.membership || user.membership === 'free') {
                showVideoOverlay();
            } else {
                loadVideoData(currentVideoId);
            }
            
            // Update progress
            videoPlayer.on('timeupdate', function() {
                const currentTime = videoPlayer.currentTime();
                const duration = videoPlayer.duration();
                if (duration > 0) {
                    videoProgress = (currentTime / duration) * 100;
                    updateProgressDisplay();
                }
            });
        }
        
        function loadVideoData(videoId) {
            const video = videoData[videoId];
            if (!video) return;
            
            // Update video info
            document.getElementById('videoTitle').textContent = video.title;
            document.getElementById('videoMaster').textContent = video.master;
            document.getElementById('videoDuration').textContent = video.duration;
            document.getElementById('videoViews').textContent = `${video.views} 次观看`;
            document.getElementById('videoDescription').textContent = video.description;
            document.getElementById('ratingValue').textContent = video.rating;
            
            // Update difficulty badge
            const difficultyBadge = document.getElementById('videoDifficulty');
            const difficultyText = {
                '初级': 'bg-green-100 text-green-800',
                '中级': 'bg-yellow-100 text-yellow-800',
                '高级': 'bg-red-100 text-red-800'
            };
            difficultyBadge.textContent = video.difficulty;
            difficultyBadge.className = `px-2 py-1 rounded text-xs ${difficultyText[video.difficulty] || 'bg-gray-100 text-gray-800'}`;
            
            // Update rating stars
            updateRatingStars(video.rating);
            
            currentVideoId = videoId;
        }
        
        function setupRatingSystem() {
            const stars = document.querySelectorAll('#ratingStars .star');
            stars.forEach((star, index) => {
                star.addEventListener('click', () => {
                    currentRating = index + 1;
                    updateRatingStars(currentRating);
                });
                
                star.addEventListener('mouseenter', () => {
                    highlightStars(index + 1);
                });
            });
            
            document.getElementById('ratingStars').addEventListener('mouseleave', () => {
                updateRatingStars(currentRating);
            });
        }
        
        function updateRatingStars(rating) {
            const stars = document.querySelectorAll('#ratingStars .star');
            stars.forEach((star, index) => {
                if (index < Math.floor(rating)) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }
        
        function highlightStars(rating) {
            const stars = document.querySelectorAll('#ratingStars .star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }
        
        function updateProgressDisplay() {
            document.getElementById('progressPercent').textContent = Math.round(videoProgress) + '%';
            
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = videoProgress + '%';
            
            // Update progress ring
            const circle = document.querySelector('.progress-ring-circle');
            const circumference = 2 * Math.PI * 40;
            const offset = circumference - (videoProgress / 100) * circumference;
            circle.style.strokeDashoffset = offset;
        }
        
        function toggleFavorite() {
            isFavorited = !isFavorited;
            const btn = document.getElementById('favoriteBtn');
            
            if (isFavorited) {
                btn.classList.add('favorited');
                btn.innerHTML = `
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path>
                    </svg>
                `;
                userManager.showNotification('已添加到收藏', 'success');
            } else {
                btn.classList.remove('favorited');
                btn.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                    </svg>
                `;
                userManager.showNotification('已取消收藏', 'info');
            }
        }
        
        function playRelatedVideo(videoId) {
            loadVideoData(videoId);
            window.scrollTo({ top: 0, behavior: 'smooth' });
            userManager.showNotification('正在切换视频...', 'success');
        }
        
        function showVideoOverlay() {
            document.getElementById('videoOverlay').classList.remove('hidden');
        }
        
        function closeVideoOverlay() {
            document.getElementById('videoOverlay').classList.add('hidden');
        }
        
        function showRatingModal() {
            document.getElementById('ratingModal').classList.remove('hidden');
            document.getElementById('ratingModal').classList.add('flex');
        }
        
        function closeRatingModal() {
            document.getElementById('ratingModal').classList.add('hidden');
            document.getElementById('ratingModal').classList.remove('flex');
        }
        
        function submitRating() {
            userManager.showNotification('评价提交成功！', 'success');
            closeRatingModal();
        }
        
        function showNoteModal() {
            document.getElementById('noteModal').classList.remove('hidden');
            document.getElementById('noteModal').classList.add('flex');
        }
        
        function closeNoteModal() {
            document.getElementById('noteModal').classList.add('hidden');
            document.getElementById('noteModal').classList.remove('flex');
        }
        
        function saveNote() {
            userManager.showNotification('笔记保存成功！', 'success');
            closeNoteModal();
        }
        
        function shareVideo() {
            userManager.showNotification('分享链接已复制到剪贴板', 'success');
        }
        
        function setupScrollReveal() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('revealed');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.scroll-reveal').forEach(el => {
                observer.observe(el);
            });
        }
    </script>
</body>
</html>